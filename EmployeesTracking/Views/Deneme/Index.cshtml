@model EmployeesTracking.Models.PersonelViewModel
@addTagHelper * ,Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewData["Title"] = "PersonelListele";
}

@if (TempData["Message"] != null)
{
    @section message
            {
        @await Html.PartialAsync("_message", (string)TempData["Message"])
    }
}

<!doctype html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>

    <div class="row">
        <div class="col-md-2">

            <div class="modal-dialog">
                <div class="modal-content">
                    <div style="text-align:center">
                        <button type="button" id="yenipersonelekle" class="btn btn-success"> Yeni Personel Ekle </button>
                    </div>

                    <div class="modal-header">
                        <h3 class="modal-title">Kriterlere Göre Filtreleme</h3>
                    </div>

                    <form asp-controller="Home" asp-action="Index" method="get">
                        <center>

                            <input class="form-control me-2" id="personeladi" name="q" type="text" placeholder="Personel Ara" aria-label="Ara">
                            <br />
                            <select asp-items="@ViewBag.Cities" id="sehir2" name="sehir" class="form-control">
                                <option selected disabled>Şehir Seçiniz</option>

                            </select>
                            <br />
                            <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                                <input type="radio" class="btn-check" name="gendernumber" id="btnradio1" value="1" autocomplete="off">
                                <label class="btn btn-outline-primary" for="btnradio1">Erkek</label>

                                <input type="radio" class="btn-check" name="gendernumber" id="btnradio2" value="2" autocomplete="off">
                                <label class="btn btn-outline-primary" for="btnradio2">Kadın</label>
                            </div>
                            <br />
                            <hr />

                            <input type="radio" class="btn-check" name="maritalnumber" id="vbtn-radio1" value="1" autocomplete="off">
                            <label class="btn btn-outline-danger" for="vbtn-radio1">Evli</label>

                            <input type="radio" class="btn-check" name="maritalnumber" id="vbtn-radio2" value="2" autocomplete="off">
                            <label class="btn btn-outline-danger" for="vbtn-radio2">Bekar</label>
                            <br />



                            <div class="modal-footer">
                                <div style="text-align:center">
                                    <button type="button" id="btngetlistfilter" class="btn btn-outline-primary"> Filterlenen Personeli Getirme Listesi </button>
                                </div>

                            </div>
                        </center>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-10">
            <center><h4>Personeller</h4></center>
            <div id="writerlist2">
                Daha Önce Personel Eklenmemiştir.
            </div>
        </div>
    </div>

</body>
</html>



<script>
    $(document).ready(function () {
        $("#btngetlistfilter").click();
    });
</script>
<script>
    $("#btngetlist").click(function () {
        $.ajax({
            contentType: "application/json",
            dataType: "json",
            type: "Get",
            url: "/Deneme/AjaxileVeriGetirme",
            success: function (func) {
                let w = jQuery.parseJSON(func);
                console.log(w);
                let tablehtml = "<table class=table table-bordered> <tr><th>Yazar ID </th> <th>Yazar Adı </th></tr>";
                $.each(w, (index, value) => {
                    tablehtml += `<tr><td>${value.Id}</td> <td>${value.Adi}</td></tr>`
                });
                tablehtml += "</table>";
                $("#writerlist").html(tablehtml);
            }
        });

    });
</script>

<script>
    $("#btngetlistfilter").click(function () {
        let filtreler = {
            q: $("#personeladi").val(),
            gendernumber: $("input[name='gendernumber']:checked").val(),
            maritalnumber: $("input[name='maritalnumber']:checked").val(),
            sehir: $('#sehir2').val(),
        };

        $.ajax({
            contentType: "application/json",
            dataType: "json",
            type: "Get",
            url: "/Deneme/AjaxileFiltrelenVeriGetirme",
            data: filtreler,
            success: function (func) {
                let w = jQuery.parseJSON(func);
                console.log(w);
                let tablehtml = "<table class=table table-bordered> <tr> <th>#</th> <th>İsim</th>  <th>Soyisim</th>  <th>Tc</th>  <th>Baba Adı</th> <th>Anne Adı</th> <th>Cinsiyet</th> <th>Medeni Hal</th> <th>Doğum Yeri</th>  <th>Güncelleme</th> <th>Sime</th>  <th>Ayrıntı</th> </tr>";
                $.each(w, (index, value) => {

                    /**/
                    /**/
                    tablehtml += `<tr><td>${value.Id}</td> <td>${value.Adi}</td> <td>${value.Soyadi}</td> <td>${value.TcNo}</td> <td>${value.BabaAdi}</td> <td>${value.AnaAdi}</td> <td>${value.GenderName}</td> <td>${value.MaritalStatusName}</td> <td>${value.CityName}</td> <td>${value.Adi}</td>   <td><a class="btn btn-primary" href="/Home/PersonelEkle/${value.Id}">Güncelle</a></td>  <td><a class="btn btn-danger" href="/Home/PersoneSil/${value.Id}">Sil</a></td> <td><a class="btn btn-danger" href="/Home/Index">Ayrıntı</a></td> </tr>`
                /**/
                /**/
            });
            tablehtml += "</table>";
            $("#writerlist2").html(tablehtml);
            }
            });

        });
</script>

